<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Co-Pilot - Covoiturage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/picocss/2.1.1/pico.classless.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="container">
        <div class="app-title">
            <span class="app-logo"><i class="fas fa-car"></i></span>
            Co-Pilot
        </div>
        <div class="profile-info" id="profile-info"></div>
    </header>

    <main class="container">
        <div class="auth-container" id="auth-container">
            <article>
                <hgroup>
                    <h2>Connexion Requise</h2>
                    <h3>Veuillez vous connecter pour accéder à l'application.</h3>
                </hgroup>
                <button id="login-btn"><i class="fab fa-google"></i> Se connecter avec Google</button>
            </article>
        </div>

        <div id="content" style="display: none;">
            <!-- Desktop Navigation -->
            <nav id="desktop-nav">
              <ul>
                <li><a href="#" class="tab-button" data-view="form"><i class="fas fa-plus-circle"></i> Ajouter</a></li>
                <li><a href="#" class="tab-button active" data-view="my-trips"><i class="fas fa-user"></i> Mes Trajets</a></li>
                <li><a href="#" class="tab-button" data-view="all-trips"><i class="fas fa-car-side"></i> Tous Trajets</a></li>
                <li><a href="#" class="tab-button" data-view="calendar"><i class="fas fa-calendar-alt"></i> Calendrier</a></li>
                <li><a href="#" class="tab-button" data-view="stats"><i class="fas fa-chart-pie"></i> Aperçu</a></li>
              </ul>
            </nav>

            <article id="form-section" class="content-section">
                <h2 id="form-title">Ajouter un Trajet</h2>
                <form id="ajout-trajet-form">
                    <div class="grid">
                        <label for="date">
                            Date du trajet *
                            <input type="date" id="date" required>
                        </label>
                        <label for="conducteur">
                            Conducteur *
                            <input type="text" id="conducteur" list="conducteur-list" placeholder="Nom du conducteur" required>
                            <datalist id="conducteur-list"></datalist>
                        </label>
                    </div>
                    <label>Passagers</label>
                    <div class="passenger-container" id="passenger-container">
                        <div class="passenger-row">
                            <input type="text" class="passenger-input" list="passager-list" placeholder="Nom du passager (optionnel)">
                            <button type="button" class="add-passenger-btn" aria-label="Ajouter un passager"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                    <datalist id="passager-list"></datalist>
                    <label for="commentaire">Commentaire (optionnel)</label>
                    <textarea id="commentaire" rows="3" placeholder="Informations complémentaires..."></textarea>

                    <input type="hidden" id="edit-id" value="">
                    <div class="grid action-buttons">
                        <button type="button" id="cancel-edit" class="secondary outline">Annuler</button>
                        <button type="reset" class="secondary">Réinitialiser</button>
                        <button type="submit" id="submit-btn">Enregistrer</button>
                    </div>
                </form>
            </article>

            <article id="table-section" class="content-section">
                <h2 id="table-title">Mes Trajets</h2>
                <div class="grid filters">
                    <label for="filter-month">Mois
                        <select id="filter-month"><option value="">Tous</option><option value="01">Jan</option><option value="02">Fév</option><option value="03">Mar</option><option value="04">Avr</option><option value="05">Mai</option><option value="06">Juin</option><option value="07">Juil</option><option value="08">Août</option><option value="09">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Déc</option></select>
                    </label>
                    <label for="filter-year">Année
                        <select id="filter-year"><option value="">Toutes</option></select>
                    </label>
                    <label for="filter-person">Personne
                        <input type="search" id="filter-person" placeholder="Nom...">
                    </label>
                    <label>
                        <button id="reset-filters" class="secondary outline"><i class="fas fa-sync-alt"></i> Reset</button>
                    </label>
                </div>
                <div id="liste-trajets" class="table-container" aria-live="polite"><div class="loading-spinner"><progress></progress></div></div>
            </article>

            <article id="calendar-section" class="content-section">
                <h2>Calendrier des Trajets</h2>
                <div class="calendar-container">
                    <div>
                        <div class="calendar-controls">
                            <button id="prev-month-btn" aria-label="Mois précédent"><i class="fas fa-chevron-left"></i></button>
                            <h3 id="current-month-year"></h3>
                            <button id="next-month-btn" aria-label="Mois suivant"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div class="calendar-grid" id="calendar-grid"></div>
                    </div>
                    <div id="trips-for-day" aria-live="polite"><p>Cliquez sur un jour pour voir les détails.</p></div>
                 </div>
            </article>

            <article id="stats-section" class="content-section">
                <h2 id="stats-title">Suggestions par Scénario</h2>
                <div id="stats-content" aria-live="polite"><progress></progress></div>
            </article>
        </div>
    </main>

    <!-- Mobile Tab Bar -->
    <nav class="tab-bar" id="tab-bar">
        <a href="#" class="tab-button" data-view="form" id="tab-form" aria-label="Ajouter"><i class="fas fa-plus-circle"></i><span>Ajouter</span></a>
        <a href="#" class="tab-button active" data-view="my-trips" id="tab-my-trips" aria-label="Mes Trajets"><i class="fas fa-user"></i><span>Mes Trajets</span></a>
        <a href="#" class="tab-button" data-view="all-trips" id="tab-all-trips" aria-label="Tous les Trajets"><i class="fas fa-car-side"></i><span>Tous</span></a>
        <a href="#" class="tab-button" data-view="calendar" id="tab-calendar" aria-label="Calendrier"><i class="fas fa-calendar-alt"></i><span>Calendrier</span></a>
        <a href="#" class="tab-button" data-view="stats" id="tab-stats" aria-label="Aperçu"><i class="fas fa-chart-pie"></i><span>Aperçu</span></a>
    </nav>

    <div id="notification" class="notification"></div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script src="script.js" defer></script>
</body>
</html>